"use strict";function initRandom(){$.ajax({url:"../data/Llist.json",type:"GET",success:function(e){$(".cha_t a").click(function(){var t=function(){for(var t="",n=0;n<e.length;n++){var i=parseInt(57*Math.random());n<3&&(t+='\n                        <li>\n                        <img src="'.concat(e[i].img,'" alt="">\n                        <p>').concat(e[i].title,"</p>\n                        <span>").concat(e[i].money,"</span>\n                        </li>"))}return t}();$(".cha_price").html(t)})}})}function initmainMlddle(){$("#yangse a").click(function(){$(this).addClass("active").siblings().removeClass("active")}),$(".bangben a").click(function(){$(this).addClass("active").siblings().removeClass("active")});var t=1;$(".bth-up").click(function(){1<++t&&$(".bth-down").css("backgroundColor","#fff"),$(".num>p").text(t)}),$(".bth-down").click(function(){t<=1?$(".bth-down").css("backgroundColor","#ddd"):(t--,$(".num>p").text(t))})}function initPageHtml(){var e=JSON.parse(localStorage.getItem("goodsInfo"));e||(alert("您要查看的数据不存在"),window.location.href="./list.html"),$(".middleImg").attr("src",e.img),$(".sub-list img").attr("src",e.img),$(".box-bg img").attr("src",e.img),$(".data-title").text(e.title),$(".data-money").text(e.money),$(".select-img").text(e.img),$(".gouwuche").click(function(){if(0===(JSON.parse(localStorage.getItem("initInfo"))||[]).length)return alert("您当前未登录, 正在跳转登录页面..."),void(window.location.href="../pages/req.html");var t=JSON.parse(localStorage.getItem("cartList"))||[];if(t.some(function(t){return t.id===e.id})){for(var n=null,i=0;i<t.length;i++)if(t[i].id===e.id){n=t[i];break}n.num=Number(n.num)+Number($(".num").text()),n.xiaoji=n.num*n.money}else e.num=$(".num").text(),e.xiaoji=e.money,e.isSelect=!1,t.push(e);localStorage.setItem("cartList",JSON.stringify(t))})}function initMain(){var c=parseInt($(".mask").css("width")),s=parseInt($(".mask").css("height")),r=parseInt($(".box-middle").css("width"))-c,l=parseInt($(".box-middle").css("height"))-s;$(".box-middle").hover(function(t){var o=this;$(".mask").show(),$(".box-bg").show(),$(".box-middle").mousemove(function(t){var n=o.parentNode.parentNode.offsetLeft,i=o.parentNode.parentNode.offsetTop,e=t.pageX-n-c/2,a=t.pageY-i-s/2;e=r<(e=e<0?0:e)?r:e,a=l<(a=a<0?0:a)?l:a,$(".mask").css({left:e,top:a}),$(".box-bg").children("img").css({left:e/r*-350,top:a/l*-350})})},function(){$(".mask").hide(),$(".box-bg").hide()})}function initHeaderInfo(){$.ajax({url:"../data/Dheader-info.json",type:"GET",success:function(t){var i="";t.forEach(function(t,n){t.success.forEach(function(t){i+="<li>".concat(t,"</li>")})}),$(".header-info").html(i)}}),$.ajax({url:"../data/header-category.json",type:"GET",success:function(t){var n="";t.forEach(function(t){n+='            \n              <dl class="clearfix">\n              <dt>'.concat(t.title,"</dt>\n            "),t.des.forEach(function(t){n+="<dd>".concat(t,"</dd>")}),n+="</dl>"}),$(".category-list").html(n)}})}function initNavTop(){var t=0;setInterval(function(){120<=(t+=30)&&($(".guangbo").css("top",0),t=30),$(".guangbo").animate({top:-t})},2e3)}$(function(){initNavTop(),initHeaderInfo(),initPageHtml(),initMain(),initmainMlddle(),initRandom()});